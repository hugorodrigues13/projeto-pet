{"ast":null,"code":"var _jsxFileName = \"/home/dev/\\xC1rea de Trabalho/Projetos/Sistema de Pet/frontend/src/components/pages/User/Profile.js\",\n    _s = $RefreshSig$();\n\nimport api from '../../../utils/api';\nimport { useState, useEffect } from 'react';\nimport styles from './Profile.module.css';\nimport formStyles from '../../form/Form.module.css';\nimport Input from '../../form/Input';\nimport useFlashMessage from '../../../hooks/useFlashMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Profile() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [preview, setPreview] = useState();\n  const [token] = useState(localStorage.getItem('token') || '');\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  useEffect(() => {\n    api.get('/users/checkuser', {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      setUser(response.data);\n    });\n  }, [token]);\n\n  function onFileChange(e) {\n    setPreview(e.target.files[0]);\n    setUser({ ...user,\n      [e.target.name]: e.target.files[0]\n    });\n  }\n\n  function handleChange(e) {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    let msgType = 'success';\n    const formData = new FormData();\n    await Object.keys(user).formEach(key => formData.append(key, user[key]));\n    const data = await api.patch(`/users/edit/${user.id}`, formData, {\n      headers: {\n        Authorization: `Beareer ${JSON.parse(token)}`,\n        'Context-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.profile_header,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Preview Imagem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), (user.image || preview) && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: preview ? URL.createObjectURL(preview) : `${process.env.REACT_APP_API}/images/users/${user.image}`,\n        alt: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: formStyles.form_container,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        text: \"imagem\",\n        type: \"file\",\n        name: \"image\",\n        handleOnChange: onFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        text: \"E-mail\",\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Digite o seu e-mail\",\n        handleOnChange: handleChange,\n        value: user.email || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        text: \"Nome\",\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Digite o seu nome\",\n        handleOnChange: handleChange,\n        value: user.name || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        text: \"Telefone\",\n        type: \"text\",\n        name: \"phone\",\n        placeholder: \"Digite o seu telefone\",\n        handleOnChange: handleChange,\n        value: user.phone || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        text: \"Senha\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Digite a sua senha\",\n        handleOnChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        text: \"Confirma\\xE7\\xE3o de Senha\",\n        type: \"password\",\n        name: \"confirmpassword\",\n        placeholder: \"Confirme a sua senha\",\n        handleOnChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Editar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Profile, \"YSgBwUTQPoImWDtaajdmfdyoanU=\", false, function () {\n  return [useFlashMessage];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["api","useState","useEffect","styles","formStyles","Input","useFlashMessage","Profile","user","setUser","preview","setPreview","token","localStorage","getItem","setFlashMessage","get","headers","Authorization","JSON","parse","then","response","data","onFileChange","e","target","files","name","handleChange","value","handleSubmit","preventDefault","msgType","formData","FormData","Object","keys","formEach","key","append","patch","id","catch","err","message","profile_header","image","URL","createObjectURL","process","env","REACT_APP_API","form_container","email","phone"],"sources":["/home/dev/Área de Trabalho/Projetos/Sistema de Pet/frontend/src/components/pages/User/Profile.js"],"sourcesContent":["import api from '../../../utils/api';\nimport {useState, useEffect} from 'react'\nimport styles from './Profile.module.css';\nimport formStyles from '../../form/Form.module.css';\nimport Input from '../../form/Input'\nimport useFlashMessage from '../../../hooks/useFlashMessage';\n\nfunction Profile(){\n    const [user, setUser] = useState({})\n    const [preview, setPreview] = useState()\n    const [token] = useState(localStorage.getItem('token') || '')\n    const {setFlashMessage} = useFlashMessage()\n\n    useEffect(() => {\n\n        api.get('/users/checkuser', {\n            headers: {\n                Authorization: `Bearer ${JSON.parse(token)}`\n            }\n        }).then((response) => {\n            setUser(response.data)\n        })\n\n    }, [token])\n\n    function onFileChange(e){\n        setPreview(e.target.files[0])\n        setUser({...user, [e.target.name] : e.target.files[0]})\n    }\n\n    function handleChange(e){\n        setUser({...user, [e.target.name] : e.target.value})\n    }\n\n    async function handleSubmit(e) {\n        e.preventDefault()\n        \n        let msgType = 'success'\n\n        const formData = new FormData()\n\n         await Object.keys(user).formEach((key) => \n            formData.append(key, user[key])\n        )\n\n        const data = await api.patch(`/users/edit/${user.id}`, formData, {\n            headers: {\n                Authorization: `Beareer ${JSON.parse(token)}`,\n                'Context-Type': 'multipart/form-data'\n            },\n        }).then((response) => {\n            return response.data\n        }).catch((err) => {\n            msgType = 'error'\n            return err.response.data\n        })\n\n        setFlashMessage(data.message, msgType)\n    }\n\n    return(\n        \n        <section>\n            <div className={styles.profile_header}>\n                <h1>Perfil</h1>\n                <p>Preview Imagem</p>\n                {(user.image || preview) && (\n                    <img \n                        src={\n                            preview \n                            ? URL.createObjectURL(preview) \n                            : `${process.env.REACT_APP_API}/images/users/${user.image}`\n                        }\n                        alt\n                        />\n                )}\n            </div>\n\n            <form onSubmit={handleSubmit} className={formStyles.form_container}>\n                <Input\n                    text=\"imagem\"\n                    type=\"file\"\n                    name=\"image\"\n                    handleOnChange={onFileChange}\n                />\n\n                <Input\n                    text=\"E-mail\"\n                    type=\"email\"\n                    name=\"email\"\n                    placeholder=\"Digite o seu e-mail\"\n                    handleOnChange={handleChange}\n                    value={user.email || ''}\n                />\n\n                <Input\n                    text=\"Nome\"\n                    type=\"text\"\n                    name=\"name\"\n                    placeholder=\"Digite o seu nome\"\n                    handleOnChange={handleChange}\n                    value={user.name || ''}\n                />\n\n                <Input\n                    text=\"Telefone\"\n                    type=\"text\"\n                    name=\"phone\"\n                    placeholder=\"Digite o seu telefone\"\n                    handleOnChange={handleChange}\n                    value={user.phone || ''}\n                />\n\n                <Input\n                    text=\"Senha\"\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"Digite a sua senha\"\n                    handleOnChange={handleChange}\n                />\n\n                <Input\n                    text=\"Confirmação de Senha\"\n                    type=\"password\"\n                    name=\"confirmpassword\"\n                    placeholder=\"Confirme a sua senha\"\n                    handleOnChange={handleChange}\n                />\n                <input type=\"submit\" value=\"Editar\"/>\n            </form>\n        </section>\n    )\n\n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module"}