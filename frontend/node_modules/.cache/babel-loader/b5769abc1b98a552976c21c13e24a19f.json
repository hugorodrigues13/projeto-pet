{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport api from '../utils/api';\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useFlashMessage from './useFlashMessage';\nexport default function useAuth() {\n  _s();\n\n  const [autheticated, setAuthenticated] = useState(false);\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  const history = use;\n\n  async function register(user) {\n    let msgText = 'Cadastro realizado com sucesso!';\n    let msgType = 'success';\n\n    try {\n      const data = await api.post('/users/register', user).then(response => {\n        return response.data;\n      });\n      console.log(data);\n    } catch (error) {\n      msgText = error.response.data.message;\n      msgType = 'error';\n    }\n\n    setFlashMessage(msgText, msgType);\n  }\n\n  async function authUser(data) {\n    setAuthenticated(true);\n    localStorage.setItem('token', JSON.stringify(data.token));\n  }\n\n  return {\n    register\n  };\n}\n\n_s(useAuth, \"RzeQenwzmZgZw/7L2xRivZQzCUc=\", false, function () {\n  return [useFlashMessage];\n});","map":{"version":3,"names":["api","useState","useEffect","useHistory","useFlashMessage","useAuth","autheticated","setAuthenticated","setFlashMessage","history","use","register","user","msgText","msgType","data","post","then","response","console","log","error","message","authUser","localStorage","setItem","JSON","stringify","token"],"sources":["/home/dev/Área de Trabalho/Projetos/Sistema de Pet/frontend/src/hooks/useAuth.js"],"sourcesContent":["import api from '../utils/api';\n\nimport {useState, useEffect} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport useFlashMessage from './useFlashMessage';\n\nexport default function useAuth(){\n    const [autheticated, setAuthenticated] = useState(false)\n    const {setFlashMessage} = useFlashMessage()\n    const history = use\n\n    async function register(user){\n\n        let msgText = 'Cadastro realizado com sucesso!'\n        let msgType = 'success'\n\n        try {\n            const data = await api.post('/users/register', user).then((response) => {\n                return response.data\n            })\n            console.log(data)\n        }catch(error){\n            msgText = error.response.data.message\n            msgType = 'error'\n\n        }\n\n        setFlashMessage(msgText, msgType)\n    }\n\n    async function authUser(data){\n\n        setAuthenticated(true)\n        localStorage.setItem('token', JSON.stringify(data.token))\n\n    }\n\n    return {register}\n}"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,cAAhB;AAEA,SAAQC,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,eAAe,SAASC,OAAT,GAAkB;EAAA;;EAC7B,MAAM,CAACC,YAAD,EAAeC,gBAAf,IAAmCN,QAAQ,CAAC,KAAD,CAAjD;EACA,MAAM;IAACO;EAAD,IAAoBJ,eAAe,EAAzC;EACA,MAAMK,OAAO,GAAGC,GAAhB;;EAEA,eAAeC,QAAf,CAAwBC,IAAxB,EAA6B;IAEzB,IAAIC,OAAO,GAAG,iCAAd;IACA,IAAIC,OAAO,GAAG,SAAd;;IAEA,IAAI;MACA,MAAMC,IAAI,GAAG,MAAMf,GAAG,CAACgB,IAAJ,CAAS,iBAAT,EAA4BJ,IAA5B,EAAkCK,IAAlC,CAAwCC,QAAD,IAAc;QACpE,OAAOA,QAAQ,CAACH,IAAhB;MACH,CAFkB,CAAnB;MAGAI,OAAO,CAACC,GAAR,CAAYL,IAAZ;IACH,CALD,CAKC,OAAMM,KAAN,EAAY;MACTR,OAAO,GAAGQ,KAAK,CAACH,QAAN,CAAeH,IAAf,CAAoBO,OAA9B;MACAR,OAAO,GAAG,OAAV;IAEH;;IAEDN,eAAe,CAACK,OAAD,EAAUC,OAAV,CAAf;EACH;;EAED,eAAeS,QAAf,CAAwBR,IAAxB,EAA6B;IAEzBR,gBAAgB,CAAC,IAAD,CAAhB;IACAiB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeZ,IAAI,CAACa,KAApB,CAA9B;EAEH;;EAED,OAAO;IAACjB;EAAD,CAAP;AACH;;GAhCuBN,O;UAEMD,e"},"metadata":{},"sourceType":"module"}